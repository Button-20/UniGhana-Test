<!-- Modal -->
<div
  class="modal fade"
  id="registerModal"
  tabindex="-1"
  aria-labelledby="registerModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <form
        [formGroup]="registerForm"
        (ngSubmit)="onSubmit()"
        class="needs-validation"
        novalidate
      >
        <div class="modal-header">
          <h5 class="modal-title" id="registerModalLabel">Register form</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
            #closeButton
          ></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="username">User Name</label>
            <input
              type="text"
              class="form-control"
              placeholder=""
              formControlName="username"
              name="username"
              required
            />
            <small
              *ngIf="
                username?.invalid && (username?.dirty || username?.touched)
              "
              class="text-danger"
            >
              <div *ngIf="username?.errors?.['required']">
                <span>Username is required</span>
              </div>
            </small>
          </div>
          <div class="mb-3">
            <label for="email">Email</label>
            <input
              type="email"
              class="form-control"
              placeholder=""
              formControlName="email"
              name="email"
              required
            />
            <small
              *ngIf="email?.invalid && (email?.dirty || email?.touched)"
              class="text-danger"
            >
              <div *ngIf="email?.errors?.['required']">
                <span>Email is required</span>
              </div>
              <div *ngIf="email?.errors?.['email']">
                <span>Invalid email</span>
              </div>
            </small>
          </div>

          <div class="mb-3">
            <label for="password">Password</label>
            <div class="input-group" id="show_hide_password">
              <input
                [type]="showPassword ? 'text' : 'password'"
                class="form-control"
                placeholder=""
                formControlName="password"
                name="password"
                required
              />
              <div class="input-group-text">
                <a
                  href="javascript:void(0);"
                  (click)="togglePasswordVisibility()"
                  style="text-decoration: none"
                >
                  <i
                    [ngClass]="showPassword ? 'bi bi-eye-slash' : 'bi bi-eye'"
                  ></i>
                </a>
              </div>
            </div>
            <small
              *ngIf="password.invalid && (password.dirty || password.touched)"
              class="text-danger"
            >
              <div *ngIf="password.errors?.['required']">
                <span>Password is required</span>
              </div>
              <div *ngIf="password.errors?.['minlength']">
                <span>Password must be at least 8 characters</span>
              </div>
              <div *ngIf="password.errors?.['pattern']">
                <span
                  >Password should have at least one letter, one number and one
                  special character</span
                >
              </div>
            </small>
          </div>

          <div class="mb-3">
            <label for="password">Confirm Password</label>
            <input
              [type]="showPassword ? 'text' : 'password'"
              class="form-control"
              id="confirmpassword"
              placeholder=""
              formControlName="confirmPassword"
              name="confirmPassword"
              required
            />
            <small
              *ngIf="
                confirmPassword.invalid &&
                (confirmPassword.dirty || confirmPassword.touched)
              "
              class="text-danger"
            >
              <div *ngIf="confirmPassword.errors?.['required']">
                <span>Confirm Password is required</span>
              </div>
              <div *ngIf="confirmPassword.errors?.['minlength']">
                <span>Confirm Password must be at least 8 characters</span>
              </div>
              <div *ngIf="confirmPassword.errors?.['passwordMismatch']">
                <span>Passwords must match</span>
              </div>
            </small>
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="actionBtn btn-secondary"
            data-bs-dismiss="modal"
          >
            Close
          </button>
          <button
            type="submit"
            class="actionBtn"
            [disabled]="!registerForm.valid"
          >
            Register
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
